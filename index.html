<!DOCTYPE html>
<html lang="bg">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#007bff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="AF Exam">
  <meta name="description" content="ะกะธะผัะปะฐัะพั ะทะฐ ะฟะพะดะณะพัะพะฒะบะฐ ะทะฐ Agentforce ะธะทะฟะธั">
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon"
    href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%23007bff'/><text x='50' y='65' text-anchor='middle' font-size='50'>๐</text></svg>">
  <link rel="stylesheet" href="css/styles.css">
  <title>Agentforce Exam</title>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
</head>

<body>
  <!-- Header -->
  <header>
    <h2>
      Agentforce Exam
      <span class="header-buttons">
        <button id="syncBtn" aria-label="Cloud Sync">๐<span id="syncStatus"></span></button>
        <button id="darkModeBtn" aria-label="Toggle dark mode">๐</button>
      </span>
    </h2>
  </header>

  <!-- Sync Modal -->
  <div id="syncModal" class="sync-modal" role="dialog" aria-labelledby="syncModalTitle">
    <div class="sync-modal-content">
      <h3 id="syncModalTitle">โ๏ธ Cloud Sync <button id="closeSyncModal" aria-label="Close">โ</button></h3>
      <div class="sync-section">
        <label><span class="sync-live"></span> Real-time ัะธะฝััะพะฝะธะทะฐัะธั</label>
        <div class="sync-info">ะัะพะผะตะฝะธัะต ัะต ัะธะฝััะพะฝะธะทะธัะฐั ะฐะฒัะพะผะฐัะธัะฝะพ ะผะตะถะดั ััััะพะนััะฒะฐัะฐ.</div>
      </div>
      <div class="sync-section">
        <label for="currentSyncId">๐ Sync ID:</label>
        <div class="sync-id-box">
          <input type="text" id="currentSyncId" readonly placeholder="ะะตะฝะตัะธัะฐ ัะต...">
          <button id="copySyncIdBtn" aria-label="Copy Sync ID">๐</button>
        </div>
      </div>
      <div class="sync-section">
        <label for="otherSyncId">๐ ะกะฒััะถะธ ะดััะณะพ ััััะพะนััะฒะพ:</label>
        <div class="sync-id-box">
          <input type="text" id="otherSyncId" placeholder="ะัะฒะตะดะธ Sync ID">
          <button id="connectSyncBtn">๐</button>
        </div>
      </div>
      <div class="sync-section">
        <button id="resetSyncBtn" class="btn-danger">๐๏ธ ะะพะฒ Sync ID</button>
        <div class="sync-info">ะกัะทะดะฐะฒะฐ ะฝะพะฒ ะฟัะพัะธะป. ะกัะฐัะธัะต ะดะฐะฝะฝะธ ะพััะฐะฒะฐั ะฝะฐ ะดััะณะธัะต ััััะพะนััะฒะฐ.</div>
      </div>
    </div>
  </div>

  <!-- Stats Panel -->
  <section id="statsPanel" class="hidden" aria-labelledby="statsPanelTitle">
    <h3 id="statsPanelTitle">๐ ะกัะฐัะธััะธะบะธ <button id="closeStatsBtn">โ</button></h3>
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-value" id="statTotalExams">0</div>
        <div class="stat-label">ะะทะฟะธัะธ</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="statAvgScore">0%</div>
        <div class="stat-label">ะกัะตะดะตะฝ ัะตะทัะปัะฐั</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="statAvgTime">0s</div>
        <div class="stat-label">ะกั. ะฒัะตะผะต/ะฒัะฟัะพั</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="statPassRate">0%</div>
        <div class="stat-label">ะะทะตัะธ ะธะทะฟะธัะธ</div>
      </div>
    </div>
    <canvas id="historyChart" aria-label="ะััะพัะธั ะฝะฐ ัะตะทัะปัะฐัะธัะต"></canvas>
    <details class="weak-list">
      <summary>๐ฏ ะกะปะฐะฑะธ ัะพัะบะธ</summary>
      <div id="weakPointsList"></div>
      <button id="reviewWeakBtn" class="btn-accent" disabled>๐ฏ ะัะตะณะพะฒะพัะธ ัะปะฐะฑะธ ัะพัะบะธ</button>
    </details>
    <button id="clearStatsBtn" class="btn-danger">๐๏ธ ะะทััะธะน ััะฐัะธััะธะบะธ</button>
    <button id="resetAllBtn" class="btn-secondary">๐ ะัะปะธัะฐะน ะฒัะธัะบะพ</button>
  </section>

  <!-- Setup Panel -->
  <section id="setupPanel" aria-labelledby="setupTitle">
    <div class="setup-step">
      <div class="step-header">
        <div class="step-number" id="step1num">1</div>
        <div class="step-title">ะะฐัะตะถะดะฐะฝะต ะฝะฐ ะฒัะฟัะพัะธ</div>
        <span id="loadStatus">โณ ะะฐัะตะถะดะฐะฝะต...</span>
      </div>
    </div>
    <div class="setup-step">
      <div class="step-header">
        <div class="step-number" id="step2num">2</div>
        <div class="step-title">ะะทะฑะตัะธ ัะตะถะธะผ</div>
      </div>
      <div class="mode-buttons">
        <button id="learningModeBtn" disabled>๐ Learning</button>
        <button id="examModeBtn" disabled>๐ Exam</button>
      </div>
      <div class="mode-desc" id="modeDesc">ะััะฒะพ ะธะทัะฐะบะฐะน ะฒัะฟัะพัะธัะต ะดะฐ ัะต ะทะฐัะตะดัั.</div>
    </div>
    <div class="setup-step">
      <div class="step-header">
        <div class="step-number" id="step3num">3</div>
        <div class="step-title">ะะทะฑะตัะธ ะธะทะฟะธั</div>
        <button id="reshuffleBtn" class="hidden">๐ ะะฐะทะฑััะบะฐะน</button>
      </div>
      <div id="examButtons" role="group" aria-label="Exam selection"></div>
      <div id="examPlaceholder">ะััะฒะพ ะธะทะฑะตัะธ ัะตะถะธะผ.</div>
    </div>
    <div class="setup-step">
      <button id="statsBtn">๐ ะะธะถ ััะฐัะธััะธะบะธ</button>
      <button id="startBtn" class="btn-success" disabled>โถ๏ธ ะกัะฐัั</button>
    </div>
  </section>

  <!-- Exam UI -->
  <section id="examUI" class="hidden" aria-labelledby="examTitle">
    <div id="examHeader">
      <button id="exitBtn">โ ะะทัะพะด</button>
      <div id="timer" aria-live="polite">Time: 105:00</div>
      <span id="helpToggle" role="button" tabindex="0">๐ ะะพะผะพั</span>
    </div>
    <div id="helpBox" class="hidden">
      <div>๐ข <b>1โ4</b> ะธะทะฑะพั | โก๏ธ <b>โ/Enter</b> Next | โฌ๏ธ <b>โ</b> Back</div>
    </div>
    <div id="progressBar" role="progressbar" aria-valuemin="0" aria-valuemax="100">
      <div id="progressFill"></div>
    </div>
    <div class="question-header">
      <div class="info-row">
        <span id="modeIndicator"></span>
        <p id="counter" class="faded-text"></p>
      </div>
      <fieldset class="confidence-panel">
        <legend class="visually-hidden">ะฃะฒะตัะตะฝะพัั</legend>
        <label><input type="checkbox" id="dontKnow"> โ ะะต ะทะฝะฐะผ</label>
        <label><input type="checkbox" id="notSure"> โ๏ธ ะะต ััะผ ัะธะณััะตะฝ</label>
      </fieldset>
    </div>
    <div class="question-box">
      <p id="question"></p>
    </div>
    <fieldset class="answers-box">
      <legend class="visually-hidden">ะัะณะพะฒะพัะธ</legend>
      <div id="answers" role="radiogroup"></div>
      <div id="resultLine" aria-live="polite"></div>
    </fieldset>
    <nav class="nav-buttons">
      <button id="backBtn">โ Back</button>
      <button id="nextBtn" class="btn-accent">Next โ</button>
    </nav>
  </section>

  <!-- Results Panel -->
  <section id="resultsPanel" class="hidden" aria-labelledby="resultsTitle"></section>

  <!-- Main JavaScript (ES6 Module) -->
  <script type="module" src="js/main.js"></script>
</body>

</html>